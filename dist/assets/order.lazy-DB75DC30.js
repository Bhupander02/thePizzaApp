import{k as e,j as y,g as c,C as f}from"./index-BeA6U5Iq.js";const g=i=>e.jsxs("div",{className:"pizza",children:[e.jsx("h1",{children:i.name}),e.jsx("p",{children:i.description}),e.jsx("img",{src:i.image,alt:i.name})]}),v=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function C({cart:i,checkout:l}){let n=0;for(let a=0;a<i.length;a++){const t=i[a];n+=t.pizza.sizes[t.size]}return e.jsxs("div",{className:"cart",children:[e.jsx("h2",{children:"Cart"}),e.jsx("ul",{children:i.map((a,t)=>e.jsxs("li",{children:[e.jsx("span",{className:"size",children:a.size})," -",e.jsxs("span",{className:"type",children:[" ",a.pizza.name," "]}),e.jsx("span",{className:"price",children:a.pizza.price})]},t))}),e.jsxs("p",{children:["Total: ",v.format(n)]}),e.jsx("button",{onClick:l,children:"Checkout"})]})}const P=y("/order")({component:N}),S=new Intl.NumberFormat("en-US",{style:"currency",currency:"INR"});function N(){const[i,l]=c.useState("pepperoni"),[n,a]=c.useState("M"),[t,u]=c.useState([]),[z,h]=c.useContext(f),[d,o]=c.useState(!0);async function x(){o(!0),await fetch("api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:z})}),h([]),o(!1)}let p,r;d||(r=t.find(s=>i===s.id),p=S.format(r.sizes?r.sizes[n]:"")),c.useEffect(()=>{j()},[]);async function j(){const m=await(await fetch("/api/pizzas")).json();u(m),o(!1)}return e.jsxs("div",{className:"order",children:[e.jsx("h2",{children:"Create Order"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),h([...z,{pizza:r,size:n,price:p}])},children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pizza-type",children:"Pizza Type"}),e.jsx("select",{onChange:s=>l(s.target.value),name:"pizza-type",value:i,children:t.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pizza-size",children:"Pizza Size"}),e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("input",{onChange:s=>a(s.target.value),checked:n==="S",type:"radio",name:"pizza-size",value:"S",id:"pizza-s"}),e.jsx("label",{htmlFor:"pizza-s",children:"Small"})]}),e.jsxs("span",{children:[e.jsx("input",{onChange:s=>a(s.target.value),checked:n==="M",type:"radio",name:"pizza-size",value:"M",id:"pizza-m"}),e.jsx("label",{htmlFor:"pizza-m",children:"Medium"})]}),e.jsxs("span",{children:[e.jsx("input",{onChange:s=>a(s.target.value),checked:n==="L",type:"radio",name:"pizza-size",value:"L",id:"pizza-l"}),e.jsx("label",{htmlFor:"pizza-l",children:"Large"})]})]})]}),e.jsx("button",{type:"submit",children:"Add to Cart"})]}),d?e.jsx("h3",{children:"LOADING â€¦"}):e.jsxs("div",{className:"order-pizza",children:[e.jsx(g,{name:r.name,description:r.description,image:r.image}),e.jsx("p",{children:p})]})]}),d?e.jsx("h2",{children:"LOADING ..."}):e.jsx(C,{checkout:x,cart:z})]})}export{P as Route};
